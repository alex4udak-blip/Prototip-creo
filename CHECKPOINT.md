# BannerGen v2 ‚Äî –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∑–∞–≤–µ—Ä—à—ë–Ω

## –î–∞—Ç–∞: 23.01.2026

---

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### Backend (~2600 —Å—Ç—Ä–æ–∫ —É–¥–∞–ª–µ–Ω–æ)

| –§–∞–π–ª | –ë—ã–ª–æ | –°—Ç–∞–ª–æ | –î–µ–π—Å—Ç–≤–∏–µ |
|------|------|-------|----------|
| `services/prompt.service.js` | 1225 | 0 | ‚ùå –£–¥–∞–ª—ë–Ω |
| `services/router.service.js` | 525 | 0 | ‚ùå –£–¥–∞–ª—ë–Ω |
| `services/runware.service.js` | 401 | 0 | ‚ùå –£–¥–∞–ª—ë–Ω |
| `services/google.service.js` | 467 | 0 | ‚ùå –£–¥–∞–ª—ë–Ω |
| `services/gemini.service.js` | 0 | 217 | ‚úÖ –°–æ–∑–¥–∞–Ω |
| `routes/generate.routes.js` | 926 | 268 | ‚úÖ –ü–µ—Ä–µ–ø–∏—Å–∞–Ω |
| `config/env.js` | - | +5 | ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `googleApiKey` |

### Frontend (~1500 —Å—Ç—Ä–æ–∫ —É–¥–∞–ª–µ–Ω–æ)

| –§–∞–π–ª | –ë—ã–ª–æ | –°—Ç–∞–ª–æ | –î–µ–π—Å—Ç–≤–∏–µ |
|------|------|-------|----------|
| `hooks/useChat.js` | 763 | 334 | ‚úÖ –£–ø—Ä–æ—â—ë–Ω |
| `components/Chat/InputArea.jsx` | 590 | 352 | ‚úÖ –£–ø—Ä–æ—â—ë–Ω |
| `components/Chat/Message.jsx` | 625 | 560 | ‚úÖ –£–ø—Ä–æ—â—ë–Ω |
| `components/Chat/ClarificationQuestions.jsx` | ~300 | 0 | ‚ùå –£–¥–∞–ª—ë–Ω |
| `components/Settings/SettingsModal.jsx` | ~200 | 0 | ‚ùå –£–¥–∞–ª—ë–Ω |
| `services/api.js` | - | +20 | ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `sendWithFormData` |
| `pages/ChatPage.jsx` | - | - | ‚úÖ –£–±—Ä–∞–Ω—ã –±–∏—Ç—ã–µ –∏–º–ø–æ—Ä—Ç—ã |
| `components/Chat/ChatWindow.jsx` | - | - | ‚úÖ `generate` ‚Üí `sendMessage` |

### –°—Ç–∏–ª–∏

| –§–∞–π–ª | –î–µ–π—Å—Ç–≤–∏–µ |
|------|----------|
| `tailwind.config.js` | ‚úÖ –ù–æ–≤–∞—è –ø—Ä–µ–º–∏–∞–ª—å–Ω–∞—è –ø–∞–ª–∏—Ç—Ä–∞ |

---

## –ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
Frontend (React)
     ‚îÇ
     ‚îÇ  sendMessage(prompt, imageFile)
     ‚îÇ  FormData: { prompt, chat_id, settings, reference }
     ‚ñº
Backend (Express)
     ‚îÇ
     ‚îÇ  POST /api/generate
     ‚îÇ  –ü–∞—Ä—Å–∏—Ç FormData, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –ë–î
     ‚ñº
gemini.service.js
     ‚îÇ
     ‚îÇ  sendMessage(chatId, text, images, settings)
     ‚îÇ  Multi-turn chat sessions
     ‚ñº
Gemini 2.0 Flash Exp (Google AI)
     ‚îÇ
     ‚îÇ  text + images ‚Üí text response
     ‚ñº
WebSocket ‚Üí Frontend
```

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (Frontend)

```javascript
settings: {
  aspectRatio: 'auto',  // '1:1', '16:9', '9:16', '4:3', 'auto'
  variants: 3,          // 1-4
  resolution: '2K',     // '1K', '2K', '4K'
  mode: 'smart'         // 'smart' | 'fast'
}
```

---

## –ß—Ç–æ —É–±—Ä–∞–Ω–æ

1. **Clarification** ‚Äî Gemini —Å–∞–º —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –≤ —á–∞—Ç–µ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
2. **Deep Thinking** ‚Äî —Ä–µ–∂–∏–º –≥–ª—É–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ Claude
3. **Vision –∞–Ω–∞–ª–∏–∑ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–∞** ‚Äî Gemini –≤–∏–¥–∏—Ç –∫–∞—Ä—Ç–∏–Ω–∫–∏ –Ω–∞—Ç–∏–≤–Ω–æ
4. **3 —Ä–µ–∂–∏–º–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏** ‚Üí 2 —Ä–µ–∂–∏–º–∞ (–£–º–Ω—ã–π/–ë—ã—Å—Ç—Ä—ã–π)
5. **SettingsModal** ‚Üí inline settings –≤ InputArea
6. **–†–æ—É—Ç–∏–Ω–≥ –º–æ–¥–µ–ª–µ–π** ‚Äî –æ–¥–Ω–∞ –º–æ–¥–µ–ª—å Gemini

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –Ω–∞ Railway** ‚Äî –¥–µ–ø–ª–æ–π –∏ —Ç–µ—Å—Ç
2. **–î–æ–±–∞–≤–∏—Ç—å GOOGLE_API_KEY –≤ ENV** –Ω–∞ Railway
3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - [ ] –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ä–µ—Ñ–µ—Ä–µ–Ω—Å ‚Üí Gemini –≤–∏–¥–∏—Ç
   - [ ] –ù–∞–ø–∏—Å–∞—Ç—å "—Å–¥–µ–ª–∞–π –¥–ª—è –ò—Å–ø–∞–Ω–∏–∏" ‚Üí –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–æ—Ö–æ–∂–∏–π –±–∞–Ω–Ω–µ—Ä
   - [ ] –†–µ–∂–∏–º –ë—ã—Å—Ç—Ä—ã–π ‚Üí –±–µ–∑ –≤–æ–ø—Ä–æ—Å–æ–≤
   - [ ] –†–µ–∂–∏–º –£–º–Ω—ã–π ‚Üí —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
   - [ ] Multi-turn –¥–∏–∞–ª–æ–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## ENV –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (Railway)

```env
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ
GOOGLE_API_KEY=your_gemini_api_key
DATABASE_URL=postgres://...
JWT_SECRET=...

# –ú–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å
# ANTHROPIC_API_KEY - Claude –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
# RUNWARE_API_KEY - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
```

---

## –ò—Ç–æ–≥–æ

| –ú–µ—Ç—Ä–∏–∫–∞ | –ë—ã–ª–æ | –°—Ç–∞–ª–æ | –ò–∑–º–µ–Ω–µ–Ω–∏–µ |
|---------|------|-------|-----------|
| Backend –∫–æ–¥ | ~3600 —Å—Ç—Ä–æ–∫ | ~500 —Å—Ç—Ä–æ–∫ | **-86%** |
| Frontend –∫–æ–¥ | ~2500 —Å—Ç—Ä–æ–∫ | ~1250 —Å—Ç—Ä–æ–∫ | **-50%** |
| –§–∞–π–ª–æ–≤ —Å–µ—Ä–≤–∏—Å–æ–≤ | 5 | 1 | **-80%** |
| –†–µ–∂–∏–º–æ–≤ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ | 3 | 2 | **-33%** |
| API –≤—ã–∑–æ–≤–æ–≤ –Ω–∞ –∑–∞–ø—Ä–æ—Å | 4-5 | 1 | **-80%** |

---

## –î–æ–ø–æ–ª–Ω–µ–Ω–∏—è (23.01.2026 –≤–µ—á–µ—Ä)

### SYSTEM_PROMPT (–æ–±–Ω–æ–≤–ª—ë–Ω)
- –ü–æ–ª–Ω–∞—è —ç–∫—Å–ø–µ—Ä—Ç–∏–∑–∞ –∞—Ä–±–∏—Ç—Ä–∞–∂–∞: –º–æ–¥–µ—Ä–∞—Ü–∏—è, —Ñ–æ—Ä–º–∞—Ç—ã, —á—Ç–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ç
- –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–π –ø–µ—Ä–µ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π
- –£–º–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∫–∞–∫ —É –º–µ–¥–∏–∞–±–∞–π–µ—Ä–∞
- –ó–Ω–∞–Ω–∏–µ —Å–ª–µ–Ω–≥–∞ –∞—Ä–±–∏—Ç—Ä–∞–∂–∞ (–∫—Ä–µ–æ, –ª–µ–Ω–¥–æ, –æ—Ñ—Ñ–µ—Ä, –∑–∞–ª–∏–≤)

### UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–¥–æ–±–∞–≤–ª–µ–Ω—ã)
- **–ë–µ–π–¥–∂ "üçå Nano Banana Pro"** –Ω–∞ –∫–∞–∂–¥–æ–π —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∫–∞—Ä—Ç–∏–Ω–∫–µ
- **–ö–Ω–æ–ø–∫–∏ –ø–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:** "–°–∫–∞—á–∞—Ç—å –≤—Å–µ", "–ï—â—ë –≤–∞—Ä–∏–∞–Ω—Ç—ã", "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"
- **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞** –≤ —Å—Ç–∏–ª–µ Genspark: "üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ | üñºÔ∏è –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è"

### –ß–µ–∫–ª–∏—Å—Ç –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

- [ ] –ë—ã—Å—Ç—Ä—ã–π —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç–∞–µ—Ç (–∫–∞—Ä—Ç–∏–Ω–∫–∞ + –∑–∞–ø—Ä–æ—Å ‚Üí —Å—Ä–∞–∑—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç)
- [ ] –£–º–Ω—ã–π —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç–∞–µ—Ç (–∑–∞–¥–∞—ë—Ç –≤–æ–ø—Ä–æ—Å—ã ‚Üí –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ ‚Üí –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç)
- [ ] AI –ø–æ–º–Ω–∏—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–∏–∞–ª–æ–≥–∞
- [ ] AI –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∏ ("—Å–¥–µ–ª–∞–π —Ç–µ–º–Ω–µ–µ")
- [ ] –ü–µ—Ä—Å–æ–Ω–∞–∂–∏ –ø–æ—Ö–æ–∂–∏ –Ω–∞ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å
- [ ] –¢–µ–∫—Å—Ç –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∞—Ö —á–∏—Ç–∞–µ–º—ã–π
- [ ] –í—Å–µ —Ä–∞–∑–º–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –ë–µ–π–¥–∂ Nano Banana Pro –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- [ ] –ö–Ω–æ–ø–∫–∏ —Å–∫–∞—á–∞—Ç—å/–µ—â—ë/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç–∞—é—Ç
