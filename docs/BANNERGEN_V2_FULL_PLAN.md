# BannerGen v2: –ü–æ–ª–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥

## –¢–µ–∫—É—â–∏–µ —Ñ–∏—á–∏ –∫–æ—Ç–æ—Ä—ã–µ –°–û–•–†–ê–ù–Ø–ï–ú

| –§–∏—á–∞ | –ì–¥–µ —Å–µ–π—á–∞—Å | –ß—Ç–æ –¥–µ–ª–∞–µ–º |
|------|------------|------------|
| **–†–µ–∂–∏–º—ã** (–£–º–Ω—ã–π/–ë—ã—Å—Ç—Ä—ã–π/–ì–ª—É–±–æ–∫–∏–π) | InputArea.jsx | –£–±–∏—Ä–∞–µ–º. Gemini —Å–∞–º —Ä–µ—à–∞–µ—Ç |
| **–†–∞–∑–º–µ—Ä—ã** (auto/–ø—Ä–µ—Å–µ—Ç—ã/–∫–∞—Å—Ç–æ–º) | InputArea.jsx, SettingsModal | –°–û–•–†–ê–ù–Ø–ï–ú ‚Äî –ø–µ—Ä–µ–¥–∞—ë–º –≤ Gemini –∫–∞–∫ `aspectRatio` |
| **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤** (1-4) | SettingsModal | –°–û–•–†–ê–ù–Ø–ï–ú ‚Äî Gemini –≥–µ–Ω–µ—Ä–∏—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ |
| **–†–µ—Ñ–µ—Ä–µ–Ω—Å** (drag&drop + Vision) | InputArea.jsx | –£–ü–†–û–©–ê–ï–ú ‚Äî Gemini —Å–∞–º –≤–∏–¥–∏—Ç –∫–∞—Ä—Ç–∏–Ω–∫—É |
| **–ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–æ–≤** | Sidebar.jsx | –°–û–•–†–ê–ù–Ø–ï–ú |
| **WebSocket –ø—Ä–æ–≥—Ä–µ—Å—Å** | websocket/handler.js | –°–û–•–†–ê–ù–Ø–ï–ú –¥–ª—è realtime |

---

## –ß—Ç–æ –£–ë–ò–†–ê–ï–ú (–º—ë—Ä—Ç–≤—ã–π –∫–æ–¥)

### –†–µ–∂–∏–º—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ ‚Üí –û–¥–∏–Ω —É–º–Ω—ã–π —Ä–µ–∂–∏–º

**–ë—ã–ª–æ 3 —Ä–µ–∂–∏–º–∞:**
```javascript
// –£–î–ê–õ–ò–¢–¨
const GENERATION_MODES = [
  { id: 'smart', ... },   // Claude clarification
  { id: 'fast', ... },    // –ë–µ–∑ –≤–æ–ø—Ä–æ—Å–æ–≤
  { id: 'deep', ... }     // Deep thinking
];
```

**–°—Ç–∞–Ω–µ—Ç:**
- Gemini —Å–∞–º —Ä–µ—à–∞–µ—Ç –∫–æ–≥–¥–∞ —Å–ø—Ä–æ—Å–∏—Ç—å
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç "–±—ã—Å—Ç—Ä–æ" / "—Å—Ä–∞–∑—É" ‚Üí –≥–µ–Ω–µ—Ä–∏—Ç –±–µ–∑ –≤–æ–ø—Ä–æ—Å–æ–≤
- –ï—Å–ª–∏ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –∏–Ω—Ñ—ã ‚Üí —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç

### –û—Ç–¥–µ–ª—å–Ω—ã–π Vision –∞–Ω–∞–ª–∏–∑ ‚Üí –í—Å—Ç—Ä–æ–µ–Ω –≤ Gemini

**–ë—ã–ª–æ:**
```
1. Upload ‚Üí Claude Vision ‚Üí visionAnalysis JSON
2. Display tags (style, content_type, text_found)
3. Pass to Imagen
```

**–°—Ç–∞–Ω–µ—Ç:**
```
1. Upload ‚Üí Show preview
2. Send to Gemini (–≤–∏–¥–∏—Ç –∫–∞—Ä—Ç–∏–Ω–∫—É –Ω–∞—Ç–∏–≤–Ω–æ)
```

---

## –ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Frontend                          ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ  ChatPage   ‚îÇ  ‚îÇ  InputArea  ‚îÇ  ‚îÇ  Settings   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  (layout)   ‚îÇ  ‚îÇ  (–ø—Ä–æ—Å—Ç–æ–π)  ‚îÇ  ‚îÇ  (—Ä–∞–∑–º–µ—Ä,   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ             ‚îÇ  ‚îÇ             ‚îÇ  ‚îÇ   variants) ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                         ‚îÇ                            ‚îÇ
‚îÇ                         ‚ñº                            ‚îÇ
‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                     ‚îÇ
‚îÇ              ‚îÇ    useChat.js   ‚îÇ ‚Üê ~300 —Å—Ç—Ä–æ–∫        ‚îÇ
‚îÇ              ‚îÇ   (—É–ø—Ä–æ—â—ë–Ω–Ω—ã–π)  ‚îÇ                     ‚îÇ
‚îÇ              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚îÇ REST + WebSocket
                      ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Backend                           ‚îÇ
‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                     ‚îÇ
‚îÇ              ‚îÇ generate.routes ‚îÇ ‚Üê ~150 —Å—Ç—Ä–æ–∫        ‚îÇ
‚îÇ              ‚îÇ   (–ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç)  ‚îÇ                     ‚îÇ
‚îÇ              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                     ‚îÇ
‚îÇ                      ‚îÇ                               ‚îÇ
‚îÇ                      ‚ñº                               ‚îÇ
‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                     ‚îÇ
‚îÇ              ‚îÇ gemini.service  ‚îÇ ‚Üê ~200 —Å—Ç—Ä–æ–∫        ‚îÇ
‚îÇ              ‚îÇ (Nano Banana    ‚îÇ                     ‚îÇ
‚îÇ              ‚îÇ  Pro + chat     ‚îÇ                     ‚îÇ
‚îÇ              ‚îÇ  sessions)      ‚îÇ                     ‚îÇ
‚îÇ              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ—Ç–æ—Ä—ã–µ –æ—Å—Ç–∞—é—Ç—Å—è

### 1. –†–∞–∑–º–µ—Ä (aspectRatio)

```javascript
// Gemini 3 Pro Image –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:
const ASPECT_RATIOS = {
  '1:1': { label: '–ö–≤–∞–¥—Ä–∞—Ç', icon: '‚¨ú' },
  '16:9': { label: '–®–∏—Ä–æ–∫–∏–π', icon: 'üñºÔ∏è' },
  '9:16': { label: 'Stories', icon: 'üì±' },
  '4:3': { label: '–°—Ç–∞–Ω–¥–∞—Ä—Ç', icon: 'üì∫' },
  '3:4': { label: '–ü–æ—Ä—Ç—Ä–µ—Ç', icon: 'üé®' },
  '21:9': { label: '–£–ª—å—Ç—Ä–∞-—à–∏—Ä–æ–∫–∏–π', icon: 'üé¨' },
  'auto': { label: 'AI –æ–ø—Ä–µ–¥–µ–ª–∏—Ç', icon: 'ü§ñ' }
};
```

### 2. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤

```javascript
// 1-4 –≤–∞—Ä–∏–∞–Ω—Ç–∞ –∫–∞–∫ —Å–µ–π—á–∞—Å
const VARIANT_OPTIONS = [1, 2, 3, 4];
// Default: 3 (–∫–∞–∫ —É Genspark)
```

### 3. –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ (–Ω–æ–≤–æ–µ!)

```javascript
// Gemini 3 Pro Image –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:
const RESOLUTIONS = {
  '1K': { label: '–°—Ç–∞–Ω–¥–∞—Ä—Ç', description: '~1024px' },
  '2K': { label: '–í—ã—Å–æ–∫–æ–µ', description: '~2048px' },
  '4K': { label: '–ú–∞–∫—Å–∏–º—É–º', description: '~4096px' }
};
// Default: '2K'
```

---

## –ù–æ–≤—ã–π —É–ø—Ä–æ—â—ë–Ω–Ω—ã–π UI

### InputArea (–±—ã–ª–æ 590 —Å—Ç—Ä–æ–∫ ‚Üí —Å—Ç–∞–Ω–µ—Ç ~200)

```jsx
export function InputArea() {
  const { sendMessage, isGenerating, settings, updateSettings } = useChatStore();
  const [message, setMessage] = useState('');
  const [attachedImage, setAttachedImage] = useState(null);
  const [showSettings, setShowSettings] = useState(false);

  const handleSend = async () => {
    if (!message.trim() && !attachedImage) return;
    await sendMessage(message, attachedImage);
    setMessage('');
    setAttachedImage(null);
  };

  return (
    <div className="input-container">
      {/* Attached image preview (–ø—Ä–æ—Å—Ç–æ–π) */}
      {attachedImage && (
        <div className="attached-preview">
          <img src={URL.createObjectURL(attachedImage)} />
          <button onClick={() => setAttachedImage(null)}>‚úï</button>
        </div>
      )}

      {/* Settings panel (inline, –Ω–µ –º–æ–¥–∞–ª–∫–∞) */}
      {showSettings && (
        <div className="settings-panel">
          <AspectRatioSelector />
          <VariantsSelector />
          <ResolutionSelector />
        </div>
      )}

      {/* Main input */}
      <div className="input-row">
        <AttachButton onFile={setAttachedImage} />
        <SettingsButton onClick={() => setShowSettings(!showSettings)} />
        <textarea value={message} onChange={e => setMessage(e.target.value)} />
        <SendButton onClick={handleSend} loading={isGenerating} />
      </div>
    </div>
  );
}
```

### Settings ‚Äî inline –ø–∞–Ω–µ–ª—å –≤–º–µ—Å—Ç–æ –º–æ–¥–∞–ª–∫–∏

**–ë—ã–ª–æ:** –û—Ç–¥–µ–ª—å–Ω–∞—è –º–æ–¥–∞–ª–∫–∞ SettingsModal.jsx

**–°—Ç–∞–Ω–µ—Ç:** Inline –ø–∞–Ω–µ–ª—å –≤ InputArea (–∫–∞–∫ —É ChatGPT)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ [üìé] [‚öôÔ∏è]  –û–ø–∏—à–∏—Ç–µ –±–∞–Ω–Ω–µ—Ä...                  [Send] ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ –†–∞–∑–º–µ—Ä: [1:1] [16:9] [9:16] [4:3] [Auto]           ‚îÇ
‚îÇ –í–∞—Ä–∏–∞–Ω—Ç—ã: [1] [2] [‚óè3] [4]                          ‚îÇ
‚îÇ –ö–∞—á–µ—Å—Ç–≤–æ: [1K] [‚óè2K] [4K]                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## –ü—Ä–µ–º–∏–∞–ª—å–Ω—ã–π UI –¥–∏–∑–∞–π–Ω

### –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞ (–æ–±–Ω–æ–≤–∏—Ç—å)

```css
:root {
  /* –§–æ–Ω—ã ‚Äî –±–æ–ª–µ–µ –≥–ª—É–±–æ–∫–∏–µ */
  --bg-primary: #0a0a0f;      /* –ü–æ—á—Ç–∏ —á—ë—Ä–Ω—ã–π */
  --bg-secondary: #12121a;    /* –ö–∞—Ä—Ç–æ—á–∫–∏ */
  --bg-chat: #0d0d14;         /* –û–±–ª–∞—Å—Ç—å —á–∞—Ç–∞ */
  --bg-hover: #1a1a25;        /* Hover */
  --bg-input: #16161f;        /* –ü–æ–ª—è –≤–≤–æ–¥–∞ */

  /* –ê–∫—Ü–µ–Ω—Ç ‚Äî –≥—Ä–∞–¥–∏–µ–Ω—Ç –≤–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ —Ü–≤–µ—Ç–∞ */
  --accent-start: #8b5cf6;    /* –§–∏–æ–ª–µ—Ç–æ–≤—ã–π */
  --accent-end: #ec4899;      /* –†–æ–∑–æ–≤—ã–π */
  --accent: linear-gradient(135deg, var(--accent-start), var(--accent-end));

  /* –¢–µ–∫—Å—Ç */
  --text-primary: #f8fafc;
  --text-secondary: #94a3b8;
  --text-muted: #64748b;

  /* –ì—Ä–∞–Ω–∏—Ü—ã ‚Äî –µ–¥–≤–∞ –∑–∞–º–µ—Ç–Ω—ã–µ */
  --border: rgba(255, 255, 255, 0.06);
  --border-light: rgba(255, 255, 255, 0.1);

  /* Glow —ç—Ñ—Ñ–µ–∫—Ç—ã */
  --glow-accent: 0 0 30px rgba(139, 92, 246, 0.3);
  --glow-soft: 0 4px 20px rgba(0, 0, 0, 0.4);
}
```

### –ù–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### 1. Gradient Button

```css
.btn-gradient {
  background: linear-gradient(135deg, #8b5cf6 0%, #ec4899 100%);
  color: white;
  border: none;
  border-radius: 12px;
  padding: 12px 24px;
  font-weight: 600;
  transition: all 0.2s;
  box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);
}

.btn-gradient:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(139, 92, 246, 0.4);
}
```

#### 2. Glass Card

```css
.glass-card {
  background: rgba(18, 18, 26, 0.8);
  backdrop-filter: blur(12px);
  border: 1px solid rgba(255, 255, 255, 0.06);
  border-radius: 16px;
  box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
}
```

#### 3. Floating Input

```css
.floating-input {
  background: rgba(22, 22, 31, 0.9);
  backdrop-filter: blur(8px);
  border: 2px solid transparent;
  border-radius: 16px;
  transition: all 0.3s;
}

.floating-input:focus-within {
  border-color: rgba(139, 92, 246, 0.5);
  box-shadow: 0 0 0 4px rgba(139, 92, 246, 0.1);
}
```

#### 4. Animated Progress

```css
.generation-progress {
  height: 3px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 2px;
  overflow: hidden;
}

.generation-progress::after {
  content: '';
  display: block;
  height: 100%;
  width: 30%;
  background: linear-gradient(90deg, #8b5cf6, #ec4899, #8b5cf6);
  background-size: 200% 100%;
  animation: progress-flow 1.5s linear infinite;
  border-radius: 2px;
}

@keyframes progress-flow {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(400%); }
}
```

---

## –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è Gemini

```javascript
const SYSTEM_PROMPT = `–¢—ã ‚Äî –ø—Ä–µ–º–∏–∞–ª—å–Ω—ã–π AI-–¥–∏–∑–∞–π–Ω–µ—Ä —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –±–∞–Ω–Ω–µ—Ä–æ–≤.

## –¢–í–û–Ø –†–û–õ–¨
–°–æ–∑–¥–∞—ë—à—å –≤–∏–∑—É–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ –¥–ª—è digital-—Ä–µ–∫–ª–∞–º—ã.
–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: –∫–∞–∑–∏–Ω–æ, –≥–µ–º–±–ª–∏–Ω–≥, –±–µ—Ç—Ç–∏–Ω–≥, —Ñ–∏–Ω–∞–Ω—Å—ã, –º–æ–±–∏–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

## –ö–ê–ö –†–ê–ë–û–¢–ê–¢–¨

### –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–∏—Å—ã–ª–∞–µ—Ç –∫–∞—Ä—Ç–∏–Ω–∫—É:
1. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π: —Å—Ç–∏–ª—å, –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π, —Ü–≤–µ—Ç–∞, —Ç–µ–∫—Å—Ç, –∫–æ–º–ø–æ–∑–∏—Ü–∏—é
2. –ò—Å–ø–æ–ª—å–∑—É–π –∫–∞–∫ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
3. –°–æ—Ö—Ä–∞–Ω–∏ –∫–ª—é—á–µ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã (–ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π, –∞—Ç–º–æ—Å—Ñ–µ—Ä—É, —Å—Ç–∏–ª—å)

### –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
–°–ø—Ä–æ—Å–∏ –ö–û–†–û–¢–ö–û (1-2 –≤–æ–ø—Ä–æ—Å–∞):
- –†–∞–∑–º–µ—Ä –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω
- –ì–ï–û/—è–∑—ã–∫ —Ç–µ–∫—Å—Ç–∞
- –¢–µ–∫—Å—Ç –±–æ–Ω—É—Å–∞/–æ—Ñ—Ñ–µ—Ä–∞
- –ù–∞–∑–≤–∞–Ω–∏–µ –±—Ä–µ–Ω–¥–∞/–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ç–æ—Ä–æ–ø–∏—Ç—Å—è:
–°–ª–æ–≤–∞ "–±—ã—Å—Ç—Ä–æ", "—Å—Ä–∞–∑—É", "–±–µ–∑ –≤–æ–ø—Ä–æ—Å–æ–≤", "–¥–∞–≤–∞–π" ‚Üí –≥–µ–Ω–µ—Ä–∏—Ä—É–π —Å—Ä–∞–∑—É —Å —Ä–∞–∑—É–º–Ω—ã–º–∏ defaults.

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è:
1. –°–æ–∑–¥–∞–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—ã—Å–æ–∫–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞
2. –ö–æ—Ä–æ—Ç–∫–æ –æ–ø–∏—à–∏ —á—Ç–æ —Å–¥–µ–ª–∞–ª
3. –ü—Ä–µ–¥–ª–æ–∂–∏ 1-2 –≤–∞—Ä–∏–∞–Ω—Ç–∞ —É–ª—É—á—à–µ–Ω–∏—è

## –°–¢–ò–õ–¨ –û–ë–©–ï–ù–ò–Ø
- –†—É—Å—Å–∫–∏–π —è–∑—ã–∫
- –ö—Ä–∞—Ç–∫–æ –∏ –ø–æ –¥–µ–ª—É
- –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ –Ω–æ –¥—Ä—É–∂–µ–ª—é–±–Ω–æ
- –ë–µ–∑ –ª–∏—à–Ω–∏—Ö –æ–±—ä—è—Å–Ω–µ–Ω–∏–π

## –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò
- –¢–µ–∫—Å—Ç –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∞—Ö: —á—ë—Ç–∫–∏–π, —á–∏—Ç–∞–µ–º—ã–π, –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω—ã–π
- –ë–æ–Ω—É—Å—ã: –≤—ã–¥–µ–ª—è–π —Ü–≤–µ—Ç–æ–º –∏ —Ä–∞–∑–º–µ—Ä–æ–º
- CTA –∫–Ω–æ–ø–∫–∏: –∑–∞–º–µ—Ç–Ω—ã–µ, —Å –ø—Ä–∏–∑—ã–≤–æ–º –∫ –¥–µ–π—Å—Ç–≤–∏—é
- –ü–µ—Ä—Å–æ–Ω–∞–∂–∏: —Å–æ—Ö—Ä–∞–Ω—è–π –∏–∑ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–∞ –µ—Å–ª–∏ –µ—Å—Ç—å

## DEFAULTS (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ):
- –†–∞–∑–º–µ—Ä: 1200x628 (FB —Ñ–æ—Ä–º–∞—Ç)
- –Ø–∑—ã–∫: —Ä—É—Å—Å–∫–∏–π
- –°—Ç–∏–ª—å: –ø—Ä–µ–º–∏–∞–ª—å–Ω—ã–π, —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π
- –í–∞—Ä–∏–∞–Ω—Ç—ã: 3
`;
```

---

## API Contract (Backend ‚Üí Frontend)

### POST /api/generate

**Request:**
```json
{
  "chat_id": 123,
  "message": "–°–¥–µ–ª–∞–π –±–∞–Ω–Ω–µ—Ä –¥–ª—è –∫–∞–∑–∏–Ω–æ —Å –±–æ–Ω—É—Å–æ–º 1500‚Ç¨",
  "images": [
    {
      "data": "base64...",
      "mimeType": "image/png"
    }
  ],
  "settings": {
    "aspectRatio": "16:9",    // –∏–ª–∏ "auto"
    "variants": 3,
    "resolution": "2K"
  }
}
```

**Response (streaming —á–µ—Ä–µ–∑ WebSocket):**
```json
// –¢–µ–∫—Å—Ç–æ–≤—ã–π –æ—Ç–≤–µ—Ç
{ "type": "text", "content": "–°–æ–∑–¥–∞—é –±–∞–Ω–Ω–µ—Ä..." }

// –í–æ–ø—Ä–æ—Å –æ—Ç AI
{ "type": "text", "content": "–ö–∞–∫–æ–π –±—Ä–µ–Ω–¥ —É–∫–∞–∑–∞—Ç—å?" }

// –ö–∞—Ä—Ç–∏–Ω–∫–∞ –≥–æ—Ç–æ–≤–∞
{ "type": "image", "url": "/uploads/xxx.png", "index": 0 }
{ "type": "image", "url": "/uploads/yyy.png", "index": 1 }

// –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ
{ "type": "complete" }
```

---

## –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ (4 –¥–Ω—è)

### –î–µ–Ω—å 1: Backend
- [ ] –°–æ–∑–¥–∞—Ç—å `gemini.service.js` —Å chat sessions
- [ ] –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å `generate.routes.js` (–æ–¥–∏–Ω endpoint)
- [ ] –£–¥–∞–ª–∏—Ç—å `prompt.service.js`, `router.service.js`, `runware.service.js`
- [ ] –¢–µ—Å—Ç: –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫—É + —Ç–µ–∫—Å—Ç ‚Üí –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç

### –î–µ–Ω—å 2: Frontend Store
- [ ] –£–ø—Ä–æ—Å—Ç–∏—Ç—å `useChat.js` (—É–±—Ä–∞—Ç—å clarification –ª–æ–≥–∏–∫—É)
- [ ] –û–±–Ω–æ–≤–∏—Ç—å API client
- [ ] –¢–µ—Å—Ç: –ø–æ–ª–Ω—ã–π flow —á–µ—Ä–µ–∑ –Ω–æ–≤—ã–π backend

### –î–µ–Ω—å 3: Frontend UI
- [ ] –ü–µ—Ä–µ–¥–µ–ª–∞—Ç—å `InputArea.jsx` (inline settings)
- [ ] –£–¥–∞–ª–∏—Ç—å `SettingsModal.jsx`, `ClarificationQuestions.jsx`
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `Message.jsx` –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞
- [ ] –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∏–ª–∏ (–ø—Ä–µ–º–∏–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω)

### –î–µ–Ω—å 4: Polish
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- [ ] –ê–Ω–∏–º–∞—Ü–∏–∏ –∏ –º–∏–∫—Ä–æ-–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
- [ ] Error handling
- [ ] Deploy

---

## –ò—Ç–æ–≥–æ

| –ú–µ—Ç—Ä–∏–∫–∞ | –ë—ã–ª–æ | –°—Ç–∞–Ω–µ—Ç |
|---------|------|--------|
| Backend –∫–æ–¥ | ~3100 —Å—Ç—Ä–æ–∫ | ~400 —Å—Ç—Ä–æ–∫ |
| Frontend –∫–æ–¥ | ~2000 —Å—Ç—Ä–æ–∫ | ~800 —Å—Ç—Ä–æ–∫ |
| –§–∞–π–ª–æ–≤ | 15+ | 8 |
| API –≤—ã–∑–æ–≤–æ–≤ –Ω–∞ –∑–∞–ø—Ä–æ—Å | 4-5 | 1 |
| Latency | 15-30 —Å–µ–∫ | 5-10 —Å–µ–∫ |
| –†–µ–∂–∏–º—ã | 3 (smart/fast/deep) | 1 (—É–º–Ω—ã–π auto) |
| –ú–æ–¥–∞–ª–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ | –î–∞ | –ù–µ—Ç (inline) |
| Vision –∞–Ω–∞–ª–∏–∑ | –û—Ç–¥–µ–ª—å–Ω—ã–π | –í—Å—Ç—Ä–æ–µ–Ω |
| Multi-turn | –ù–µ—Ç | –î–∞ |

**–£–±–∏—Ä–∞–µ–º:** ~4200 —Å—Ç—Ä–æ–∫ –º—ë—Ä—Ç–≤–æ–≥–æ –∫–æ–¥–∞
**–î–æ–±–∞–≤–ª—è–µ–º:** ~1200 —Å—Ç—Ä–æ–∫ —á–∏—Å—Ç–æ–≥–æ –∫–æ–¥–∞
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** -75% –∫–æ–¥–∞, +100% —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
