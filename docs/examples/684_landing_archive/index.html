<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, maximum-scale=1, user-scalable=no" />
  <title>Amazon Casino - Caza de Bonos</title>
  <meta name="theme-color" content="#0a0a12"/>
  
  <!-- ========== CONFIG / –ù–ê–°–¢–†–û–ô–ö–ò ========== -->
  <script>
    const CONFIG = {
      offerUrl: "https://wood-port.cloud",
      totalCash: 1500,
      totalFs: 250,
      currency: "‚Ç¨",
      requiredBoxes: 3,
      claimButtonText: "RECLAMA TU BONO",
      enableProtection: true
    };
  </script>
  <!-- ========================================= -->
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Russo+One&family=Orbitron:wght@400;700;900&family=Roboto:wght@400;700;900&display=swap" rel="stylesheet">
  
  <style>
    :root {
      --gold: #ffd700;
      --gold-light: #fff4b8;
      --gold-dark: #b8860b;
      --neon-orange: #ff6600;
      --neon-blue: #00d4ff;
      --neon-green: #00ff88;
      --neon-pink: #ff00aa;
      --neon-purple: #aa00ff;
      --amazon-orange: #FF9900;
      --amazon-dark: #131921;
      --bg-dark: #0a0a12;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      -webkit-tap-highlight-color: transparent;
      user-select: none;
    }

    html, body {
      height: 100%;
      font-family: 'Roboto', sans-serif;
      background: var(--bg-dark);
      overflow: hidden;
    }

    .game {
      position: relative;
      width: 100%;
      max-width: 500px;
      margin: 0 auto;
      height: 100dvh;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    /* === ANIMATED BACKGROUND === */
    .bg-layer {
      position: absolute;
      inset: 0;
      background: url('bg.png') center top/cover no-repeat;
      z-index: 0;
    }

    .bg-particles {
      position: absolute;
      inset: 0;
      z-index: 1;
      overflow: hidden;
      pointer-events: none;
    }

    .bg-particles span {
      position: absolute;
      width: 4px;
      height: 4px;
      background: var(--gold);
      border-radius: 50%;
      animation: floatParticle 8s linear infinite;
      opacity: 0;
    }

    @keyframes floatParticle {
      0% { opacity: 0; transform: translateY(100vh) scale(0); }
      10% { opacity: 0.8; }
      90% { opacity: 0.8; }
      100% { opacity: 0; transform: translateY(-20vh) scale(1); }
    }

    .bg-overlay {
      position: absolute;
      inset: 0;
      background: 
        radial-gradient(ellipse at 50% 0%, rgba(255,102,0,0.15) 0%, transparent 50%),
        radial-gradient(ellipse at 50% 100%, rgba(0,0,0,0.9) 0%, transparent 50%),
        linear-gradient(to bottom, rgba(0,0,0,0.2) 0%, rgba(0,0,0,0.1) 40%, rgba(0,0,0,0.7) 100%);
      z-index: 2;
    }

    /* === HEADER / PROGRESS === */
    .header {
      position: relative;
      z-index: 20;
      padding: 10px 16px;
      padding-top: calc(10px + env(safe-area-inset-top, 0px));
      background: linear-gradient(180deg, rgba(10,10,18,0.95) 0%, rgba(20,20,30,0.9) 100%);
      border-bottom: 2px solid var(--neon-orange);
      box-shadow: 0 4px 20px rgba(255,102,0,0.2);
      flex-shrink: 0;
    }

    .header::after {
      content: '';
      position: absolute;
      bottom: -2px;
      left: 0;
      right: 0;
      height: 2px;
      background: linear-gradient(90deg, transparent, var(--gold), var(--neon-orange), var(--gold), transparent);
      animation: shimmer 2s linear infinite;
    }

    @keyframes shimmer {
      0% { opacity: 0.5; }
      50% { opacity: 1; }
      100% { opacity: 0.5; }
    }

    .stats-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .stat-box {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      background: rgba(0,0,0,0.5);
      border-radius: 8px;
      border: 1px solid rgba(255,255,255,0.1);
    }

    .stat-box.cash {
      border-color: rgba(0,255,136,0.3);
      box-shadow: 0 0 15px rgba(0,255,136,0.1);
    }

    .stat-box.spins {
      border-color: rgba(0,212,255,0.3);
      box-shadow: 0 0 15px rgba(0,212,255,0.1);
    }

    .stat-icon {
      font-size: 20px;
    }

    .stat-value {
      font-family: 'Orbitron', monospace;
      font-size: 18px;
      font-weight: 700;
    }

    .stat-box.cash .stat-value { color: var(--neon-green); text-shadow: 0 0 10px var(--neon-green); }
    .stat-box.spins .stat-value { color: var(--neon-blue); text-shadow: 0 0 10px var(--neon-blue); }

    /* Progress Bar */
    .progress-container {
      position: relative;
      height: 40px;
      background: linear-gradient(180deg, #1a1a2e 0%, #0f0f1a 100%);
      border-radius: 20px;
      overflow: visible;
      border: 2px solid #333;
      box-shadow: inset 0 3px 8px rgba(0,0,0,0.5);
    }

    .progress-track {
      position: absolute;
      top: 50%;
      left: 25px;
      right: 25px;
      height: 6px;
      transform: translateY(-50%);
      background: rgba(255,255,255,0.1);
      border-radius: 4px;
    }

    .progress-fill {
      position: absolute;
      left: 0;
      top: 0;
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, var(--neon-orange), var(--gold), var(--neon-orange));
      border-radius: 4px;
      transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 0 20px var(--neon-orange);
    }

    .progress-fill::after {
      content: '';
      position: absolute;
      right: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 16px;
      height: 16px;
      background: #fff;
      border-radius: 50%;
      box-shadow: 0 0 20px var(--gold), 0 0 40px var(--neon-orange);
    }

    .checkpoints {
      position: absolute;
      top: 50%;
      left: 30px;
      right: 30px;
      transform: translateY(-50%);
      display: flex;
      justify-content: space-between;
      z-index: 5;
    }

    .checkpoint {
      width: 28px;
      height: 28px;
      background: linear-gradient(180deg, #2a2a3e, #1a1a2e);
      border: 2px solid #444;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Orbitron', monospace;
      font-size: 10px;
      font-weight: 700;
      color: #666;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 3px 10px rgba(0,0,0,0.5);
    }

    .checkpoint.active {
      background: linear-gradient(180deg, var(--gold), var(--gold-dark));
      border-color: #fff;
      color: #000;
      transform: scale(1.15);
      animation: checkpointPulse 1s ease-in-out infinite;
      box-shadow: 0 0 20px var(--gold);
    }

    .checkpoint.completed {
      background: linear-gradient(180deg, var(--neon-green), #00aa55);
      border-color: #88ffaa;
      color: #fff;
      transform: scale(1.1);
      box-shadow: 0 0 20px var(--neon-green);
    }

    .checkpoint.completed::after {
      content: '‚úì';
      font-size: 16px;
    }

    .checkpoint.completed span { display: none; }

    @keyframes checkpointPulse {
      0%, 100% { box-shadow: 0 0 20px var(--gold); }
      50% { box-shadow: 0 0 40px var(--gold), 0 0 60px var(--neon-orange); }
    }

    /* === CHARACTER === */
    .character {
      position: absolute;
      top: calc(85px + env(safe-area-inset-top, 0px));
      left: 50%;
      transform: translateX(-50%);
      width: 55%;
      max-width: 280px;
      z-index: 5;
      filter: drop-shadow(0 10px 40px rgba(0,0,0,0.8));
      animation: characterFloat 3s ease-in-out infinite;
    }

    @keyframes characterFloat {
      0%, 100% { transform: translateX(-50%) translateY(0); }
      50% { transform: translateX(-50%) translateY(-8px); }
    }

    .character img {
      width: 100%;
      height: auto;
    }

    /* === SPEECH BUBBLE === */
    .speech-bubble {
      position: absolute;
      top: calc(120px + env(safe-area-inset-top, 0px));
      left: 10px;
      z-index: 100;
      background: linear-gradient(180deg, #fff 0%, #f0f0f0 100%);
      border: 3px solid var(--amazon-orange);
      border-radius: 16px;
      padding: 12px 14px;
      max-width: 150px;
      text-align: center;
      opacity: 0;
      transform: scale(0) rotate(-5deg);
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      box-shadow: 0 8px 30px rgba(0,0,0,0.4), 0 0 20px rgba(255,153,0,0.2);
    }

    .speech-bubble.show {
      opacity: 1;
      transform: scale(1) rotate(0deg);
    }

    .speech-bubble::after {
      content: '';
      position: absolute;
      right: -12px;
      bottom: 15px;
      border: 12px solid transparent;
      border-left-color: #fff;
    }

    .speech-bubble::before {
      content: '';
      position: absolute;
      right: -18px;
      bottom: 12px;
      border: 15px solid transparent;
      border-left-color: var(--amazon-orange);
    }

    .speech-bubble .message {
      font-family: 'Russo One', sans-serif;
      font-size: 11px;
      color: #1a1a1a;
      line-height: 1.4;
    }

    .speech-bubble .message .highlight { color: var(--neon-orange); font-size: 13px; }
    .speech-bubble .message .cash { color: #00aa55; font-size: 13px; }
    .speech-bubble .message .spins { color: #0088cc; font-size: 13px; }

    /* === BOXES AREA === */
    .boxes-area {
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      padding: 0 10px;
      padding-bottom: calc(12px + env(safe-area-inset-bottom, 0px));
      z-index: 10;
    }

    .boxes-container {
      display: flex;
      flex-direction: column;
      gap: 2.5vw;
      width: 100%;
      max-width: 420px;
      margin: 0 auto;
    }

    .boxes-row {
      display: flex;
      justify-content: center;
      gap: 2.5vw;
    }

    .boxes-row.row-3 { gap: 5vw; }

    /* === GIFT BOX (3D STYLE) === */
    .box {
      position: relative;
      width: 20vw;
      height: 20vw;
      max-width: 85px;
      max-height: 85px;
      background: transparent;
      border: none;
      cursor: pointer;
      padding: 0;
      outline: none;
      perspective: 500px;
      transition: transform 0.3s ease;
    }

    .box-inner {
      position: absolute;
      inset: -45%;
      width: 190%;
      height: 190%;
      transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
      transform-style: preserve-3d;
    }

    .box img {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: contain;
      backface-visibility: hidden;
    }

    .box img.closed {
      filter: drop-shadow(0 8px 20px rgba(0,0,0,0.6)) drop-shadow(0 0 10px rgba(255,153,0,0.3));
    }

    .box img.open {
      opacity: 0;
      transform: scale(0.5) rotateY(180deg);
    }

    .box .glow {
      position: absolute;
      inset: -60%;
      background: radial-gradient(circle, rgba(255,215,0,0.6) 0%, rgba(255,102,0,0.3) 30%, transparent 60%);
      opacity: 0;
      pointer-events: none;
      z-index: -1;
      transition: opacity 0.3s ease;
    }

    .box:not(.opened):not(.disabled):hover {
      transform: scale(1.05);
    }

    .box:not(.opened):not(.disabled):hover .glow {
      opacity: 0.5;
    }

    .box:not(.opened):not(.disabled):active {
      transform: scale(0.95);
    }

    .box.disabled { pointer-events: none; opacity: 0.2; }
    .box.opened { pointer-events: none; }

    .box.opened .box-inner {
      transform: rotateY(10deg) rotateX(-5deg) scale(1.1);
    }

    .box.opened img.closed {
      opacity: 0;
      filter: blur(10px);
    }

    .box.opened img.open {
      opacity: 1;
      transform: scale(1) rotateY(0deg);
      filter: drop-shadow(0 8px 20px rgba(0,0,0,0.6)) drop-shadow(0 0 30px var(--gold));
    }

    .box.opened .glow {
      opacity: 0.8;
      animation: glowPulse 1s ease-in-out infinite;
    }

    @keyframes glowPulse {
      0%, 100% { transform: scale(1); opacity: 0.6; }
      50% { transform: scale(1.2); opacity: 0.9; }
    }

    /* Shaking animation */
    @keyframes epicShake {
      0%, 100% { transform: translate(0) rotate(0) scale(1); }
      10% { transform: translate(-6px, 3px) rotate(-5deg) scale(1.02); }
      20% { transform: translate(6px, -3px) rotate(5deg) scale(1.05); }
      30% { transform: translate(-5px, 2px) rotate(-4deg) scale(1.03); }
      40% { transform: translate(5px, -2px) rotate(4deg) scale(1.06); }
      50% { transform: translate(-4px, 3px) rotate(-3deg) scale(1.04); }
      60% { transform: translate(4px, -3px) rotate(3deg) scale(1.07); }
      70% { transform: translate(-3px, 2px) rotate(-2deg) scale(1.05); }
      80% { transform: translate(3px, -2px) rotate(2deg) scale(1.08); }
      90% { transform: translate(-2px, 1px) rotate(-1deg) scale(1.06); }
    }

    .box.shaking {
      animation: epicShake 0.6s ease;
      z-index: 30;
    }

    .box.shaking .glow {
      opacity: 1;
      animation: shakeGlow 0.6s ease;
    }

    @keyframes shakeGlow {
      0% { transform: scale(1); opacity: 0.5; }
      50% { transform: scale(1.5); opacity: 1; }
      100% { transform: scale(1); opacity: 0.5; }
    }

    /* Teasing animations */
    @keyframes teaseJump {
      0%, 100% { transform: translateY(0) scale(1); }
      50% { transform: translateY(-15px) scale(1.08); }
    }

    @keyframes teaseWiggle {
      0%, 100% { transform: rotate(0deg); }
      25% { transform: rotate(-8deg); }
      75% { transform: rotate(8deg); }
    }

    @keyframes teaseDance {
      0%, 100% { transform: translateY(0) rotate(0deg) scale(1); }
      25% { transform: translateY(-10px) rotate(-5deg) scale(1.05); }
      50% { transform: translateY(-5px) rotate(3deg) scale(1.08); }
      75% { transform: translateY(-12px) rotate(-3deg) scale(1.05); }
    }

    .box.teasing { z-index: 20; }

    .box.teasing img.closed {
      filter: drop-shadow(0 8px 20px rgba(0,0,0,0.6)) drop-shadow(0 0 25px var(--gold));
    }

    .box.tease-jump { animation: teaseJump 0.5s cubic-bezier(0.36, 0, 0.66, -0.56); }
    .box.tease-wiggle { animation: teaseWiggle 0.4s ease-in-out; }
    .box.tease-dance { animation: teaseDance 0.7s ease-in-out; }

    /* === BOX REWARD POPUP === */
    .box-reward {
      position: absolute;
      bottom: 110%;
      left: 50%;
      transform: translateX(-50%) translateY(30px) scale(0);
      z-index: 150;
      background: linear-gradient(180deg, #1a2533 0%, #0f1a25 100%);
      border: 2px solid var(--gold);
      border-radius: 14px;
      padding: 10px 16px;
      text-align: center;
      opacity: 0;
      pointer-events: none;
      white-space: nowrap;
      box-shadow: 
        0 10px 40px rgba(0,0,0,0.7),
        0 0 30px rgba(255,215,0,0.4),
        inset 0 1px 0 rgba(255,255,255,0.1);
    }

    .box-reward::after {
      content: '';
      position: absolute;
      top: 100%;
      left: 50%;
      transform: translateX(-50%);
      border: 10px solid transparent;
      border-top-color: var(--gold);
    }

    .box-reward.show {
      animation: rewardPopIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
    }

    .box-reward.hide {
      animation: rewardPopOut 0.3s ease forwards;
    }

    @keyframes rewardPopIn {
      0% { opacity: 0; transform: translateX(-50%) translateY(30px) scale(0); }
      60% { transform: translateX(-50%) translateY(-15px) scale(1.1); }
      100% { opacity: 1; transform: translateX(-50%) translateY(-10px) scale(1); }
    }

    @keyframes rewardPopOut {
      0% { opacity: 1; transform: translateX(-50%) translateY(-10px) scale(1); }
      100% { opacity: 0; transform: translateX(-50%) translateY(-40px) scale(0.5); }
    }

    .box-reward .reward-content {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .box-reward .reward-value {
      font-family: 'Orbitron', monospace;
      font-size: 18px;
      font-weight: 700;
    }

    .box-reward .reward-value.cash {
      color: var(--neon-green);
      text-shadow: 0 0 15px var(--neon-green);
    }

    .box-reward .reward-value.spins {
      color: var(--neon-blue);
      text-shadow: 0 0 15px var(--neon-blue);
    }

    .box-reward .reward-separator {
      color: #666;
      font-size: 14px;
    }

    /* === PARTICLES === */
    .particle {
      position: fixed;
      width: 20px;
      height: 20px;
      pointer-events: none;
      z-index: 200;
      animation: particleFly 0.8s ease-out forwards;
    }

    .particle.coin {
      background: radial-gradient(circle at 30% 30%, var(--gold-light), var(--gold), var(--gold-dark));
      border-radius: 50%;
      box-shadow: 0 0 10px var(--gold);
    }

    .particle.ticket {
      background: linear-gradient(135deg, var(--neon-blue), var(--neon-purple));
      border-radius: 3px;
      box-shadow: 0 0 10px var(--neon-blue);
    }

    @keyframes particleFly {
      0% { opacity: 1; transform: translate(0, 0) rotate(0deg) scale(1); }
      100% { opacity: 0; transform: translate(var(--dx), var(--dy)) rotate(var(--rot)) scale(0.3); }
    }

    /* === SHOCKWAVE === */
    .shockwave {
      position: fixed;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      pointer-events: none;
      z-index: 180;
      animation: shockwaveExpand 0.6s ease-out forwards;
    }

    @keyframes shockwaveExpand {
      0% {
        transform: translate(-50%, -50%) scale(1);
        border: 3px solid var(--gold);
        opacity: 1;
      }
      100% {
        transform: translate(-50%, -50%) scale(15);
        border: 1px solid var(--gold);
        opacity: 0;
      }
    }

    /* === CONFETTI === */
    .confetti-container {
      position: absolute;
      inset: 0;
      pointer-events: none;
      overflow: hidden;
      z-index: 90;
    }

    .confetti-container i {
      position: absolute;
      top: -30px;
      width: 12px;
      height: 16px;
      border-radius: 3px;
      opacity: 0;
    }

    @keyframes confettiFall {
      0% { top: -30px; opacity: 1; transform: rotate(0deg) translateX(0); }
      100% { top: 120%; opacity: 0.6; transform: rotate(1080deg) translateX(var(--x)); }
    }

    /* === MODAL === */
    .modal {
      position: absolute;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 500;
      padding: 20px;
    }

    .modal.show { display: flex; }

    .modal-backdrop {
      position: absolute;
      inset: 0;
      background: rgba(0,0,0,0.9);
      animation: fadeIn 0.5s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .modal-content {
      position: relative;
      width: 100%;
      max-width: 380px;
      background: linear-gradient(180deg, #1a1a2e 0%, #0a0a15 100%);
      border-radius: 24px;
      border: 3px solid var(--gold);
      padding: 30px 20px;
      text-align: center;
      animation: modalSlideIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      box-shadow: 
        0 20px 60px rgba(0,0,0,0.8),
        0 0 50px rgba(255,215,0,0.3),
        inset 0 1px 0 rgba(255,255,255,0.1);
    }

    @keyframes modalSlideIn {
      0% { opacity: 0; transform: scale(0.5) translateY(50px); }
      100% { opacity: 1; transform: scale(1) translateY(0); }
    }

    .modal-lights {
      position: absolute;
      top: -10px;
      left: 20px;
      right: 20px;
      display: flex;
      justify-content: space-around;
    }

    .modal-light {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      animation: lightBlink 0.5s ease infinite;
    }

    .modal-light:nth-child(odd) { background: var(--neon-orange); box-shadow: 0 0 15px var(--neon-orange); }
    .modal-light:nth-child(even) { background: var(--gold); box-shadow: 0 0 15px var(--gold); animation-delay: 0.25s; }

    @keyframes lightBlink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.3; }
    }

    .modal-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 28px;
      font-weight: 900;
      color: var(--gold);
      text-transform: uppercase;
      letter-spacing: 3px;
      margin-bottom: 5px;
      text-shadow: 0 0 30px var(--gold);
      animation: titleGlow 1s ease-in-out infinite;
    }

    @keyframes titleGlow {
      0%, 100% { text-shadow: 0 0 20px var(--gold); }
      50% { text-shadow: 0 0 40px var(--gold), 0 0 60px var(--neon-orange); }
    }

    .modal-subtitle {
      font-family: 'Russo One', sans-serif;
      font-size: 14px;
      color: #888;
      margin-bottom: 25px;
    }

    .prize-display {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-bottom: 25px;
    }

    .prize-box {
      flex: 1;
      max-width: 140px;
      padding: 20px 15px;
      background: rgba(0,0,0,0.5);
      border-radius: 16px;
      border: 2px solid rgba(255,255,255,0.1);
    }

    .prize-box.cash {
      border-color: rgba(0,255,136,0.4);
      box-shadow: 0 0 30px rgba(0,255,136,0.2);
    }

    .prize-box.spins {
      border-color: rgba(0,212,255,0.4);
      box-shadow: 0 0 30px rgba(0,212,255,0.2);
    }

    .prize-icon {
      font-size: 32px;
      margin-bottom: 10px;
    }

    .prize-value {
      font-family: 'Orbitron', monospace;
      font-size: 28px;
      font-weight: 700;
      margin-bottom: 5px;
    }

    .prize-box.cash .prize-value {
      color: var(--neon-green);
      text-shadow: 0 0 20px var(--neon-green);
    }

    .prize-box.spins .prize-value {
      color: var(--neon-blue);
      text-shadow: 0 0 20px var(--neon-blue);
    }

    .prize-label {
      font-size: 12px;
      color: #666;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .prize-value.spinning {
      animation: slotSpin 0.1s linear infinite;
    }

    @keyframes slotSpin {
      0% { opacity: 1; }
      50% { opacity: 0.3; }
      100% { opacity: 1; }
    }

    .cta-btn {
      width: 100%;
      padding: 18px 30px;
      background: linear-gradient(180deg, var(--neon-orange) 0%, #cc5500 100%);
      border: none;
      border-radius: 14px;
      font-family: 'Orbitron', sans-serif;
      font-size: 16px;
      font-weight: 700;
      color: #fff;
      text-transform: uppercase;
      letter-spacing: 2px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 6px 0 #993300, 0 10px 30px rgba(255,102,0,0.4);
      animation: ctaPulse 1.5s ease-in-out infinite;
    }

    .cta-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 0 #993300, 0 15px 40px rgba(255,102,0,0.5);
    }

    .cta-btn:active {
      transform: translateY(4px);
      box-shadow: 0 2px 0 #993300;
    }

    @keyframes ctaPulse {
      0%, 100% { box-shadow: 0 6px 0 #993300, 0 10px 30px rgba(255,102,0,0.4); }
      50% { box-shadow: 0 6px 0 #993300, 0 10px 50px rgba(255,102,0,0.7), 0 0 30px rgba(255,102,0,0.3); }
    }

    .timer {
      margin-top: 15px;
      font-size: 13px;
      color: #666;
    }

    .timer span {
      color: var(--gold);
      font-family: 'Orbitron', monospace;
      font-weight: 700;
    }
  </style>
</head>
<body>
  <!-- ========== SIMPLE PRELOADER ========== -->
  <div class="preloader" id="preloader">
    <div class="roller-shutter" id="rollerShutter">
      <img src="logo.png" alt="Logo" class="preloader-logo">
      <div class="preloader-progress">
        <div class="preloader-progress-fill" id="progressFill"></div>
      </div>
    </div>
  </div>

  <style>
    .preloader {
      position: fixed;
      inset: 0;
      z-index: 9999;
      background: #1a1a1a;
    }
    
    .roller-shutter {
      position: absolute;
      inset: 0;
      background: repeating-linear-gradient(180deg, #4a4a4a 0px, #3a3a3a 2px, #4a4a4a 4px, #333 8px, #444 12px);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      transform-origin: top center;
      transition: transform 1s ease-in-out;
    }
    
    .preloader.open .roller-shutter {
      transform: scaleY(0);
    }
    
    .preloader.hidden {
      display: none;
    }
    
    .preloader-logo {
      width: 250px;
      max-width: 70vw;
      margin-bottom: 25px;
    }
    
    .preloader-progress {
      width: 220px;
      height: 14px;
      background: #222;
      border-radius: 7px;
    }
    
    .preloader-progress-fill {
      width: 0%;
      height: 100%;
      background: linear-gradient(90deg, #ff6600, #ffaa00);
      border-radius: 7px;
      transition: width 0.15s;
    }
  </style>

  <div class="game" style="opacity: 0; transition: opacity 0.5s ease;">
    <div class="bg-layer"></div>
    <div class="bg-particles" id="bgParticles"></div>
    <div class="bg-overlay"></div>

    <!-- HEADER -->
    <div class="header">
      <div class="stats-row">
        <div class="stat-box cash">
          <span class="stat-icon">üí∞</span>
          <span class="stat-value"><span id="totalCash">0</span>‚Ç¨</span>
        </div>
        <div class="stat-box spins">
          <span class="stat-icon">üé∞</span>
          <span class="stat-value"><span id="totalSpins">0</span> FS</span>
        </div>
      </div>

      <div class="progress-container">
        <div class="progress-track">
          <div class="progress-fill" id="progressFill"></div>
        </div>
        <div class="checkpoints" id="checkpoints"></div>
      </div>
    </div>

    <!-- CHARACTER -->
    <div class="character">
      <img src="man.png" alt="Host">
    </div>

    <!-- SPEECH BUBBLE -->
    <div class="speech-bubble" id="speechBubble">
      <div class="message" id="speechText"></div>
    </div>

    <!-- BOXES -->
    <div class="boxes-area">
      <div class="boxes-container" id="boxesContainer"></div>
    </div>

    <!-- CONFETTI -->
    <div class="confetti-container" id="confetti"></div>

    <!-- MODAL -->
    <div class="modal" id="modal">
      <div class="modal-backdrop"></div>
      <div class="modal-content">
        <div class="modal-lights">
          <div class="modal-light"></div>
          <div class="modal-light"></div>
          <div class="modal-light"></div>
          <div class="modal-light"></div>
          <div class="modal-light"></div>
          <div class="modal-light"></div>
          <div class="modal-light"></div>
        </div>

        <div class="modal-title">JACKPOT!</div>
        <div class="modal-subtitle">¬°Has desbloqueado el bono completo!</div>

        <div class="prize-display">
          <div class="prize-box cash">
            <div class="prize-icon">üíé</div>
            <div class="prize-value" id="finalCash">???</div>
            <div class="prize-label">Bono</div>
          </div>
          <div class="prize-box spins">
            <div class="prize-icon">üé∞</div>
            <div class="prize-value" id="finalSpins">???</div>
            <div class="prize-label">Giros Gratis</div>
          </div>
        </div>

        <button class="cta-btn" id="claimBtn">RECLAMA TU BONO</button>
        <div class="timer">Redireccionando en <span id="countdown">5</span>s</div>
      </div>
    </div>
  </div>

  <script>
  (function(){

    // ========== SIMPLE PRELOADER ==========
    const preloader = document.getElementById('preloader');
    const progressFillEl = document.getElementById('progressFill');
    const gameContainer = document.querySelector('.game');
    
    let progress = 0;
    
    const progressInterval = setInterval(() => {
      progress += Math.random() * 8 + 3;
      if (progress >= 100) {
        progress = 100;
        clearInterval(progressInterval);
        
        setTimeout(() => {
          preloader.classList.add('open');
          setTimeout(() => {
            preloader.classList.add('hidden');
            gameContainer.style.opacity = '1';
          }, 1000);
        }, 300);
      }
      
      progressFillEl.style.width = progress + '%';
    }, 100);
    
    // Protection
    if (CONFIG.enableProtection) {
      setInterval(function(){
        const start = performance.now();
        debugger;
        if(performance.now() - start > 100) {
          document.body.innerHTML = '';
          window.location.href = 'about:blank';
        }
      }, 1000);
      document.addEventListener('contextmenu', e => e.preventDefault());
      document.addEventListener('keydown', e => {
        if(e.key === 'F12' || (e.ctrlKey && e.shiftKey && (e.key === 'I' || e.key === 'J' || e.key === 'C')) || (e.ctrlKey && e.key === 'u')) {
          e.preventDefault();
          return false;
        }
      });
    }

    const TOTAL_CASH = CONFIG.totalCash;
    const TOTAL_FS = CONFIG.totalFs;
    const REQUIRED = CONFIG.requiredBoxes;
    const CURRENCY = CONFIG.currency;

    const REWARD_SETS = [
      [{ cash: 500, fs: 100 }, { cash: 600, fs: 50 }, { cash: 400, fs: 100 }],
      [{ cash: 700, fs: 80 }, { cash: 400, fs: 70 }, { cash: 400, fs: 100 }],
      [{ cash: 450, fs: 120 }, { cash: 550, fs: 30 }, { cash: 500, fs: 100 }],
      [{ cash: 600, fs: 50 }, { cash: 500, fs: 100 }, { cash: 400, fs: 100 }]
    ];

    const DIALOGS = {
      start: [
        "¬°Hola! ¬°Elige <span class='highlight'>3 cajas</span> para ganar bonos! ¬°Algunas pueden estar vac√≠as! üò¨",
        "¬°Bienvenido! ¬°Abre <span class='highlight'>3 cajas</span> para premios! ¬°Buena suerte! üçÄ",
        "¬°Elige <span class='highlight'>3 cajas</span>! No todas tienen premios... ü§û"
      ],
      win: [
        "¬°WOW! <span class='cash'>" + CURRENCY + "{cash}</span>! ¬°Est√°s en racha! üî•",
        "¬°Incre√≠ble! <span class='cash'>" + CURRENCY + "{cash}</span>! ¬°La suerte te sonr√≠e! ‚ú®",
        "¬°S√≠! <span class='spins'>{fs} Giros Gratis</span>! ¬°Bien hecho! üé∞",
        "¬°Boom! <span class='spins'>{fs} FS</span>! ¬°Qu√© suerte! üé≤",
        "<span class='cash'>" + CURRENCY + "{cash}</span> + <span class='spins'>{fs} FS</span>! ¬°JACKPOT! üéâ"
      ],
      almostDone: [
        "¬°Solo <span class='highlight'>{left}</span> m√°s! üí™",
        "¬°Solo quedan <span class='highlight'>{left}</span>! üèÜ"
      ],
      lastOne: [
        "¬°√öLTIMA CAJA! ¬°Que cuente! üôè",
        "¬°√öltima elecci√≥n! ¬°Cruza los dedos! ü§û"
      ],
      finalWin: [
        "¬°INCRE√çBLE! ¬°Ganaste TODOS los premios! üèÜüéâ",
        "¬°FANT√ÅSTICO! ¬°Bono completo desbloqueado! üåüüí∞",
        "¬°ASOMBROSO! ¬°Jugada perfecta! üéä"
      ]
    };

    let rewards = [...REWARD_SETS[Math.floor(Math.random() * REWARD_SETS.length)]];
    rewards = rewards.sort(() => Math.random() - 0.5);

    let opened = 0, locked = false;
    let boxes = [];
    let speechTimeout = null;
    let wonCash = 0, wonSpins = 0;

    const container = document.getElementById('boxesContainer');
    const totalCashEl = document.getElementById('totalCash');
    const totalSpinsEl = document.getElementById('totalSpins');
    const modal = document.getElementById('modal');
    const confetti = document.getElementById('confetti');
    const progressFill = document.getElementById('progressFill');
    const checkpointsContainer = document.getElementById('checkpoints');
    const speechBubble = document.getElementById('speechBubble');
    const speechText = document.getElementById('speechText');

    const openSound = new Audio('open.mp3');
    const winSound = new Audio('win.mp3');
    openSound.volume = 0.6;
    winSound.volume = 0.7;

    const offerUrl = new URLSearchParams(location.search).get('offer') || CONFIG.offerUrl;

    // Create background particles
    function createBgParticles() {
      const container = document.getElementById('bgParticles');
      for (let i = 0; i < 30; i++) {
        const span = document.createElement('span');
        span.style.left = Math.random() * 100 + '%';
        span.style.animationDelay = Math.random() * 8 + 's';
        span.style.animationDuration = (6 + Math.random() * 4) + 's';
        container.appendChild(span);
      }
    }

    // Create checkpoints
    function createCheckpoints() {
      checkpointsContainer.innerHTML = '';
      for (let i = 0; i < REQUIRED; i++) {
        const cp = document.createElement('div');
        cp.className = 'checkpoint';
        cp.innerHTML = '<span>' + (i + 1) + '</span>';
        checkpointsContainer.appendChild(cp);
      }
    }

    function randomFrom(arr) {
      return arr[Math.floor(Math.random() * arr.length)];
    }

    function showSpeech(text, duration = 3500) {
      if (speechTimeout) clearTimeout(speechTimeout);
      speechText.innerHTML = text;
      speechBubble.classList.add('show');
      speechTimeout = setTimeout(() => {
        speechBubble.classList.remove('show');
      }, duration);
    }

    function createBoxes() {
      container.innerHTML = '';
      boxes = [];
      const pattern = [4, 3, 4];
      let boxIndex = 0;

      for (let row = 0; row < pattern.length; row++) {
        const rowDiv = document.createElement('div');
        rowDiv.className = 'boxes-row';
        if (pattern[row] === 3) rowDiv.classList.add('row-3');

        for (let col = 0; col < pattern[row]; col++) {
          const box = document.createElement('button');
          box.className = 'box';
          box.innerHTML = `
            <div class="glow"></div>
            <div class="box-inner">
              <img src="box-closed.png" class="closed" alt="">
              <img src="box-open.png" class="open" alt="">
            </div>
          `;
          box.onclick = () => openBox(box);
          rowDiv.appendChild(box);
          boxes.push(box);
          boxIndex++;
        }
        container.appendChild(rowDiv);
      }
    }

    function getProgressWidth(count) {
      if (count === 0) return 0;
      if (count >= REQUIRED) return 100;
      return (count / REQUIRED) * 100;
    }

    function updateUI() {
      totalCashEl.textContent = wonCash;
      totalSpinsEl.textContent = wonSpins;
      progressFill.style.width = getProgressWidth(opened) + '%';

      const checkpoints = document.querySelectorAll('.checkpoint');
      checkpoints.forEach((cp, index) => {
        cp.classList.remove('active', 'completed');
        if (index < opened) cp.classList.add('completed');
        else if (index === opened && opened < REQUIRED) cp.classList.add('active');
      });
    }

    function createShockwave(x, y) {
      const wave = document.createElement('div');
      wave.className = 'shockwave';
      wave.style.left = x + 'px';
      wave.style.top = y + 'px';
      document.body.appendChild(wave);
      setTimeout(() => wave.remove(), 600);
    }

    function particles(el, coins, tix) {
      const r = el.getBoundingClientRect();
      const cx = r.left + r.width/2, cy = r.top + r.height/2;

      createShockwave(cx, cy);

      const make = (type, d) => {
        setTimeout(() => {
          const p = document.createElement('div');
          p.className = 'particle ' + type;
          p.style.left = cx + 'px';
          p.style.top = cy + 'px';
          const a = Math.random() * Math.PI * 2;
          const dist = 80 + Math.random() * 100;
          p.style.setProperty('--dx', Math.cos(a)*dist + 'px');
          p.style.setProperty('--dy', (Math.sin(a)*dist - 50) + 'px');
          p.style.setProperty('--rot', (Math.random()*720) + 'deg');
          document.body.appendChild(p);
          setTimeout(() => p.remove(), 900);
        }, d);
      };
      for (let i = 0; i < coins; i++) make('coin', i*25);
      for (let i = 0; i < tix; i++) make('ticket', i*35);
    }

    function burstConfetti() {
      const colors = ['#FF9900','#FFD700','#00ff88','#00d4ff','#fff','#ff00aa','#aa00ff'];
      for (let i = 0; i < 60; i++) {
        const c = document.createElement('i');
        c.style.left = Math.random()*100 + '%';
        c.style.background = colors[Math.floor(Math.random()*colors.length)];
        c.style.setProperty('--x', (Math.random()*120-60) + 'px');
        c.style.animation = `confettiFall ${1.5+Math.random()*0.8}s linear forwards`;
        c.style.animationDelay = Math.random()*0.5 + 's';
        confetti.appendChild(c);
        setTimeout(() => c.remove(), 3000);
      }
    }

    function getSpeechForReward(cash, fs, remaining) {
      let msg = '';
      if (cash > 0 && fs > 0) {
        msg = randomFrom(DIALOGS.win.filter(d => d.includes('{cash}') && d.includes('{fs}')));
        msg = msg.replace('{cash}', cash).replace('{fs}', fs);
      } else if (cash > 0) {
        msg = randomFrom(DIALOGS.win.filter(d => d.includes('{cash}') && !d.includes('{fs}')));
        msg = msg.replace('{cash}', cash);
      } else if (fs > 0) {
        msg = randomFrom(DIALOGS.win.filter(d => d.includes('{fs}') && !d.includes('{cash}')));
        msg = msg.replace('{fs}', fs);
      }

      if (remaining === 1) {
        msg = randomFrom(DIALOGS.lastOne);
      } else if (remaining > 1 && remaining <= 2) {
        const almostMsg = randomFrom(DIALOGS.almostDone).replace('{left}', remaining);
        msg = msg + '<br>' + almostMsg;
      }

      return msg;
    }

    function showBoxReward(box, cash, fs) {
      const popup = document.createElement('div');
      popup.className = 'box-reward';

      let content = '<div class="reward-content">';
      if (cash > 0) content += `<span class="reward-value cash">+${CURRENCY}${cash}</span>`;
      if (cash > 0 && fs > 0) content += '<span class="reward-separator">+</span>';
      if (fs > 0) content += `<span class="reward-value spins">${fs} FS</span>`;
      content += '</div>';

      popup.innerHTML = content;
      box.appendChild(popup);

      requestAnimationFrame(() => popup.classList.add('show'));

      setTimeout(() => {
        popup.classList.remove('show');
        popup.classList.add('hide');
        setTimeout(() => popup.remove(), 300);
      }, 1800);
    }

    function openBox(box) {
      if (locked || opened >= REQUIRED || box.classList.contains('opened')) return;
      locked = true;

      box.classList.add('shaking');
      openSound.currentTime = 0;
      openSound.play().catch(() => {});

      setTimeout(() => {
        box.classList.remove('shaking');
        box.classList.add('opened');

        const reward = rewards[opened];
        wonCash += reward.cash;
        wonSpins += reward.fs;
        opened++;
        updateUI();

        showBoxReward(box, reward.cash, reward.fs);

        const remaining = REQUIRED - opened;
        if (remaining > 0) {
          const speech = getSpeechForReward(reward.cash, reward.fs, remaining);
          setTimeout(() => showSpeech(speech, 3500), 600);
        }

        setTimeout(() => {
          particles(box, 8, 5);

          setTimeout(() => {
            locked = false;

            if (opened >= REQUIRED) {
              stopBoxTeasing();
              boxes.forEach(b => b.classList.add('disabled'));
              burstConfetti();
              setTimeout(burstConfetti, 400);
              setTimeout(burstConfetti, 800);

              showSpeech(randomFrom(DIALOGS.finalWin), 4000);

              setTimeout(() => {
                winSound.currentTime = 0;
                winSound.play().catch(() => {});

                modal.classList.add('show');

                const finalCashEl = document.getElementById('finalCash');
                const finalSpinsEl = document.getElementById('finalSpins');

                finalCashEl.classList.add('spinning');
                finalSpinsEl.classList.add('spinning');

                setTimeout(() => {
                  finalCashEl.classList.remove('spinning');
                  finalCashEl.textContent = CURRENCY + TOTAL_CASH;
                }, 800);

                setTimeout(() => {
                  finalSpinsEl.classList.remove('spinning');
                  finalSpinsEl.textContent = TOTAL_FS + ' FS';
                }, 1200);

                setTimeout(() => {
                  let countdown = 5;
                  const countdownEl = document.getElementById('countdown');
                  const countdownInterval = setInterval(() => {
                    countdown--;
                    countdownEl.textContent = countdown;
                    if (countdown <= 0) {
                      clearInterval(countdownInterval);
                      location.href = offerUrl + window.location.search;
                    }
                  }, 1000);
                }, 1500);
              }, 1200);
            }
          }, 300);
        }, 350);
      }, 600);
    }

    document.getElementById('claimBtn').onclick = () => {
      location.href = offerUrl + window.location.search;
    };
    document.getElementById('claimBtn').textContent = CONFIG.claimButtonText;

    // Box teasing
    let teaseInterval = null;
    const teaseAnimations = ['tease-jump', 'tease-wiggle', 'tease-dance'];

    function teaseRandomBoxes() {
      const unopenedBoxes = boxes.filter(b => !b.classList.contains('opened') && !b.classList.contains('shaking'));
      if (unopenedBoxes.length === 0) {
        stopBoxTeasing();
        return;
      }

      const numToTease = Math.min(unopenedBoxes.length, 2 + Math.floor(Math.random() * 2));
      const shuffled = [...unopenedBoxes].sort(() => Math.random() - 0.5);
      const boxesToTease = shuffled.slice(0, numToTease);

      boxesToTease.forEach((box, i) => {
        setTimeout(() => {
          if (box.classList.contains('opened') || box.classList.contains('shaking')) return;

          const animation = teaseAnimations[Math.floor(Math.random() * teaseAnimations.length)];
          box.classList.add('teasing', animation);

          setTimeout(() => {
            box.classList.remove('teasing', ...teaseAnimations);
          }, 700);
        }, i * 120);
      });
    }

    function startBoxTeasing() {
      if (teaseInterval) return;
      teaseRandomBoxes();
      teaseInterval = setInterval(teaseRandomBoxes, 900);
    }

    function stopBoxTeasing() {
      if (teaseInterval) {
        clearInterval(teaseInterval);
        teaseInterval = null;
      }
      boxes.forEach(b => b.classList.remove('teasing', ...teaseAnimations));
    }

    // Init
    createBgParticles();
    createCheckpoints();
    createBoxes();
    updateUI();

    setTimeout(() => {
      showSpeech(randomFrom(DIALOGS.start), 5000);
    }, 500);

    startBoxTeasing();
  })();
  </script>
</body>
</html>
